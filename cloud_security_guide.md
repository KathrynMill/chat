# 雲伺服器安全組配置指南

## 🔍 問題診斷

您的聊天伺服器已經正確配置：
- ✅ 伺服器正在監聽端口 3000
- ✅ 系統防火牆已開放端口 3000
- ❌ 雲伺服器安全組未開放端口 3000

## 🌐 您的伺服器信息

- **公網IP**: `8.137.157.214`
- **端口**: `3000`
- **訪問地址**: `http://8.137.157.214:3000`

## 📋 各雲服務商配置步驟

### 阿里雲 ECS 配置

1. **登入阿里雲控制台**
   - 訪問 https://ecs.console.aliyun.com/
   - 使用您的阿里雲帳號登入

2. **找到您的實例**
   - 在實例列表中找到 IP 為 `8.137.157.214` 的實例
   - 點擊實例名稱進入詳情頁面

3. **配置安全組**
   - 在實例詳情頁面，找到「安全組」區域
   - 點擊安全組名稱（通常是 `sg-xxxxx`）
   - 點擊「配置規則」

4. **添加入站規則**
   - 點擊「手動添加」
   - 填寫以下信息：
     - **授權策略**: 允許
     - **優先級**: 1
     - **協議類型**: 自定義TCP
     - **端口範圍**: 3000/3000
     - **授權對象**: 0.0.0.0/0
     - **描述**: 聊天應用程式端口
   - 點擊「確定」

### 騰訊雲 CVM 配置

1. **登入騰訊雲控制台**
   - 訪問 https://console.cloud.tencent.com/cvm
   - 使用您的騰訊雲帳號登入

2. **找到您的實例**
   - 在實例列表中找到對應的實例
   - 點擊實例名稱進入詳情頁面

3. **配置安全組**
   - 在實例詳情頁面，找到「安全組」區域
   - 點擊安全組名稱
   - 點擊「編輯規則」

4. **添加入站規則**
   - 點擊「添加規則」
   - 填寫以下信息：
     - **類型**: 自定義
     - **來源**: 0.0.0.0/0
     - **協議端口**: TCP:3000
     - **策略**: 允許
     - **備註**: 聊天應用程式端口
   - 點擊「確定」

### 華為雲 ECS 配置

1. **登入華為雲控制台**
   - 訪問 https://console.huaweicloud.com/ecs/
   - 使用您的華為雲帳號登入

2. **找到您的實例**
   - 在實例列表中找到對應的實例
   - 點擊實例名稱進入詳情頁面

3. **配置安全組**
   - 在實例詳情頁面，找到「安全組」區域
   - 點擊安全組名稱
   - 點擊「更改安全組」

4. **添加規則**
   - 點擊「添加規則」
   - 填寫以下信息：
     - **方向**: 入方向
     - **協議**: TCP
     - **端口**: 3000
     - **源地址**: 0.0.0.0/0
     - **描述**: 聊天應用程式端口
   - 點擊「確定」

## 🧪 測試連接

配置完成後，使用以下命令測試：

```bash
# 測試外部連接
curl -I http://8.137.157.214:3000

# 或者使用瀏覽器訪問
# http://8.137.157.214:3000
```

## 🔧 常見問題

### 1. 找不到安全組設置
- 確保您有管理員權限
- 檢查實例是否正在運行
- 聯繫雲服務商客服

### 2. 配置後仍然無法訪問
- 等待 1-2 分鐘讓配置生效
- 檢查伺服器是否正在運行：`./start_public.sh`
- 確認端口沒有被其他程序佔用

### 3. 安全組規則不生效
- 檢查規則優先級是否正確
- 確認沒有其他規則阻止連接
- 嘗試重啟實例

## 📞 需要幫助？

如果您不確定使用的是哪個雲服務商，可以：

1. **檢查實例詳情頁面**，通常會顯示雲服務商名稱
2. **查看控制台網址**，不同雲服務商有不同的控制台地址
3. **聯繫客服**，提供您的實例信息

## 🎯 配置完成後

成功配置後，其他人就可以通過以下地址訪問您的聊天應用程式：

**http://8.137.157.214:3000**

他們可以：
- 註冊新帳號
- 登入聊天
- 添加好友
- 進行即時聊天
- 使用找回ID功能 