# 雲伺服器安全组配置指南

## 🔍 问题診斷

您的聊天伺服器已經正確配置：
- ✅ 伺服器正在监聽端口 3000
- ✅ 系统防火墙已开放端口 3000
- ❌ 雲伺服器安全组未开放端口 3000

## 🌐 您的伺服器信息

- **公网IP**: `8.137.157.214`
- **端口**: `3000`
- **访问地址**: `http://8.137.157.214:3000`

## 📋 各雲服务商配置步骤

### 阿里雲 ECS 配置

1. **登录阿里雲控制台**
   - 访问 https://ecs.console.aliyun.com/
   - 使用您的阿里雲帳號登录

2. **找到您的实例**
   - 在实例列表中找到 IP 為 `8.137.157.214` 的实例
   - 點擊实例名稱进入詳情頁面

3. **配置安全组**
   - 在实例詳情頁面，找到「安全组」區域
   - 點擊安全组名稱（通常是 `sg-xxxxx`）
   - 點擊「配置规则」

4. **添加入站规则**
   - 點擊「手动添加」
   - 填写以下信息：
     - **授权策略**: 允許
     - **优先级**: 1
     - **協議類型**: 自定義TCP
     - **端口范圍**: 3000/3000
     - **授权對象**: 0.0.0.0/0
     - **描述**: 聊天应用程式端口
   - 點擊「確定」

### 騰讯雲 CVM 配置

1. **登录騰讯雲控制台**
   - 访问 https://console.cloud.tencent.com/cvm
   - 使用您的騰讯雲帳號登录

2. **找到您的实例**
   - 在实例列表中找到對應的实例
   - 點擊实例名稱进入詳情頁面

3. **配置安全组**
   - 在实例詳情頁面，找到「安全组」區域
   - 點擊安全组名稱
   - 點擊「編輯规则」

4. **添加入站规则**
   - 點擊「添加规则」
   - 填写以下信息：
     - **類型**: 自定義
     - **來源**: 0.0.0.0/0
     - **協議端口**: TCP:3000
     - **策略**: 允許
     - **备註**: 聊天应用程式端口
   - 點擊「確定」

### 華為雲 ECS 配置

1. **登录華為雲控制台**
   - 访问 https://console.huaweicloud.com/ecs/
   - 使用您的華為雲帳號登录

2. **找到您的实例**
   - 在实例列表中找到對應的实例
   - 點擊实例名稱进入詳情頁面

3. **配置安全组**
   - 在实例詳情頁面，找到「安全组」區域
   - 點擊安全组名稱
   - 點擊「更改安全组」

4. **添加规则**
   - 點擊「添加规则」
   - 填写以下信息：
     - **方向**: 入方向
     - **協議**: TCP
     - **端口**: 3000
     - **源地址**: 0.0.0.0/0
     - **描述**: 聊天应用程式端口
   - 點擊「確定」

## 🧪 测试连接

配置完成後，使用以下命令测试：

```bash
# 测试外部连接
curl -I http://8.137.157.214:3000

# 或者使用瀏覽器访问
# http://8.137.157.214:3000
```

## 🔧 常见问题

### 1. 找不到安全组设置
- 確保您有管理員权限
- 检查实例是否正在运行
- 联系雲服务商客服

### 2. 配置後仍然無法访问
- 等待 1-2 分鐘讓配置生效
- 检查伺服器是否正在运行：`./start_public.sh`
- 確认端口沒有被其他程序佔用

### 3. 安全组规则不生效
- 检查规则优先级是否正確
- 確认沒有其他规则阻止连接
- 嘗试重启实例

## 📞 需要幫助？

如果您不確定使用的是哪个雲服务商，可以：

1. **检查实例詳情頁面**，通常會顯示雲服务商名稱
2. **查看控制台网址**，不同雲服务商有不同的控制台地址
3. **联系客服**，提供您的实例信息

## 🎯 配置完成後

成功配置後，其他人就可以通过以下地址访问您的聊天应用程式：

**http://8.137.157.214:3000**

他們可以：
- 注册新帳號
- 登录聊天
- 添加好友
- 进行即時聊天
- 使用找回ID功能 